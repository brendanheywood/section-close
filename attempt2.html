<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<title>Attempt 2</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<style>
section {
	border: 1px solid red;
}

section > .body {
	background: #eee;
	margin: 0;
	padding: 1px;
}

section.open > .body {
  
}

section .close {
	cursor: pointer;
}
</style>


</head>
<body>
  <section><h1>Heading 1</h1>
    <div class="body">
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    </div>
    </section>    
  <section><h1>Heading 2</h1>
    <div class="body">
eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    </div>

  </section>    
  <section><h1>Heading 3</h1>
    <div class="body">
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    </div>

  </section>    
  <section><h1>Heading 4</h1>
    <div class="body">
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    </div>
  </section>
  <section><h1>Heading</h1>
    <div class="body">
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    </div>

  </section>    
  <section><h1>Heading</h1>    <div class="body">

    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>    </div>

  </section>   <section><h1>Heading</h1>    <div class="body">

    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>    </div>

  </section>    
  <section><h1>Heading</h1>    <div class="body">

    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>    </div>

  </section>   <section><h1>Heading</h1>    <div class="body">
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>    </div>

  </section>    
  <section><h1>Heading</h1>    <div class="body">

    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>    </div>

  </section>   <section><h1>Heading</h1>    <div class="body">

    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>    </div>

  </section>    
  <section><h1>Heading</h1>    <div class="body">

    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>
    <p>some lorum ipssuneeth erh th eth eth et eth eth eth eh eth teh eth e eht hte </p>    </div>

  </section>    
    
  
  
</body>
<script>
$('section .body')
	.append('<div class="close">Close this section</div>')
	.hide();

var delay = 500;

//open from top
$('section h1').click(function(){
	var sec = $(this).closest('section');
	if (sec.hasClass('open')){
		sec.removeClass('open');
		sec.find('.body').slideUp(delay);
	} else {
		sec.addClass('open');
		sec.find('.body').slideDown(delay);
	}
});



// close from bottom
$('section .close').click(function(){
   
	var sec = $(this).closest('section');
	sec.removeClass('open');
  
	var scrollTop = $('body').scrollTop();
	var sectionTop    = sec.position().top;

	sec.find('.body').slideUp(delay);

	// If the heading is visible then just let is slide up
	if (sectionTop > scrollTop){ return; }
  
	// If the heading is not visible then slide the top down instead of the bottom up
	var sectionHeight = sec.find('.body').outerHeight();

	// animate a mirror opening div
	var cheat = $('<div> </div>')
		.prependTo('body')
		.css('height', 0)
		.animate({
			'height': sectionHeight
		}, delay, function(){
			// remove dummy
			cheat.remove();

			// scroll up by X
			//window.scrollBy(0, sectionHeight);

		});
	 
});


</script>
</html>
